!function(t){var a={};function n(e){if(a[e])return a[e].exports;var l=a[e]={i:e,l:!1,exports:{}};return t[e].call(l.exports,l,l.exports,n),l.l=!0,l.exports}n.m=t,n.c=a,n.d=function(t,a,e){n.o(t,a)||Object.defineProperty(t,a,{enumerable:!0,get:e})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,a){if(1&a&&(t=n(t)),8&a)return t;if(4&a&&"object"==typeof t&&t&&t.__esModule)return t;var e=Object.create(null);if(n.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:t}),2&a&&"string"!=typeof t)for(var l in t)n.d(e,l,function(a){return t[a]}.bind(null,l));return e},n.n=function(t){var a=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(a,"a",a),a},n.o=function(t,a){return Object.prototype.hasOwnProperty.call(t,a)},n.p="",n(n.s=0)}([function(t,a,n){n(1),t.exports=n(2)},function(module,exports){$(document).ready((function(){var numRows=0,selected_prod=[],prod_array=[];function show_table(){$("#tbl_body").html("");for(let t=0;t<prod_array.length;t++)jQuery("#tbl_body").append(`\n            <tr id="tr${t}">\n                <td class="td-0" >\n                    ${t+1}\n                </td>\n                <td class="td-1">\n                    <div id="t_prod_${t}" class="t_prod">\n                        ${prod_array[t].value}\n                    </div>\n                </td>\n                <td class="td-2">\n                    <span class="cl-mb">Вес:</span>\n                    <div class="inpt-dv">\n                        <input type=text class="t_inp form-control"  id="t_w_${t}" value="${prod_array[t].weight}" />\n                    </div>\n                    <span class="t_val" id="t_val_${t}"></span>\n                    <span class="cl-mb">г</span>\n                </td>\n                <td class="td-3" >\n                    <div>\n                        <span class="cl-mb">Белки</span>\n                    </div>\n                    <span id="t_prot_${t}">${prod_array[t].protein}</span>\n                    <span class="cl-mb">г</span>\n                </td>\n                <td class="td-4" >\n                    <div>\n                        <span class="cl-mb">Жиры</span>\n                    </div>\n                    <span id="t_fat_${t}">\n                        ${prod_array[t].fat}\n                    </span>\n                    <span class="cl-mb">г</span>\n                </td>\n                <td class="td-5" >\n                    <div>\n                    <span class="cl-mb">Углеводы</span>\n                    </div>\n                    <span id="t_carb_${t}">\n                        ${prod_array[t].carb}\n                    </span>\n                    <span class="cl-mb">г</span>\n                </td>\n                <td class="td-6" >\n                    <div>\n                    <span class="cl-mb">Калории</span>\n                    </div>\n                    <span id="t_cal_${t}">\n                        ${prod_array[t].cal}\n                    </span>\n                    <span class="cl-mb">ккал</span>\n                </td>\n                <td class="td-7">\n                    <button class="btn btn-danger" data-delete="${t}" type="button">\n                        <svg class="bi bi-x" fill="currentColor" height="1em" viewBox="0 0 16 16" width="1em"\n                             xmlns="http://www.w3.org/2000/svg">\n                            <path clip-rule="evenodd"\n                                  d="M11.854 4.146a.5.5 0 010 .708l-7 7a.5.5 0 01-.708-.708l7-7a.5.5 0 01.708 0z"\n                                  fill-rule="evenodd"/>\n                            <path clip-rule="evenodd"\n                                  d="M4.146 4.146a.5.5 0 000 .708l7 7a.5.5 0 00.708-.708l-7-7a.5.5 0 00-.708 0z"\n                                  fill-rule="evenodd"/>\n                        </svg>\n                    </button>\n                </td>\n            </tr>\n            `),jQuery("#t_w_"+t).keyup((function(a){console.log(t),$("#t_val_"+t).text(a.target.value),prod_array[t-1].weight=a.target.value,calculates()}))}function delete_row(t){prod_array.splice(t,1),show_table(),calculates()}function calculates(){var weight=0,w100=0,prot=0,fat=0,carb=0,cal=0,total_weight=0,total_prot=0,total_fat=0,total_carb=0,total_cal=0;for(let i=0;i<prod_array.length;i++)weight=eval($("#t_w_"+i).val()),null!=weight&&weight>0?(w100=weight/100,prot=prod_array[i].protein*w100,fat=prod_array[i].fat*w100,carb=prod_array[i].carb*w100,cal=prod_array[i].cal*w100,total_weight+=weight,total_prot+=prot,total_fat+=fat,total_carb+=carb,total_cal+=cal):(prot=0,fat=0,carb=0,cal=0),jQuery("#t_prot_"+i).text(prot.toFixed(2)),jQuery("#t_fat_"+i).text(fat.toFixed(2)),jQuery("#t_carb_"+i).text(carb.toFixed(2)),jQuery("#t_cal_"+i).text(cal.toFixed(2));jQuery("#tbl_w").text(total_weight.toFixed(2)),jQuery("#tbl_p").text(total_prot.toFixed(2)),jQuery("#tbl_f").text(total_fat.toFixed(2)),jQuery("#tbl_c").text(total_carb.toFixed(2)),jQuery("#tbl_k").text(total_cal.toFixed(2)),w100=total_weight>0?100/total_weight:0,jQuery("#tbl_p100").text((total_prot*w100).toFixed(2)),jQuery("#tbl_f100").text((total_fat*w100).toFixed(2)),jQuery("#tbl_c100").text((total_carb*w100).toFixed(2)),jQuery("#tbl_k100").text((total_cal*w100).toFixed(2))}jQuery.ajax({url:"uploads/product.json",dataType:"json"}).done((function(t){let a=jQuery.map(t,(function(t,a){return{value:t.name,protein:t.protein,fat:t.fat,carb:t.carb,cal:t.cal,weight:0}}));jQuery("#autocomplete-ajax").autocomplete({source:a,select:function(t,a){prod_array.push(a.item),selected_prod.push(a.item)}})})),$(document).on("click",".add-product",(function(){let t=prod_array.length;t-=1,$("#tbl_body").append(`\n            <tr class="" id="tr${t}" style="display:none;">\n                <td class="td-0">${t+1}</td>\n                <td class="td-1">\n                    <div class="t_prod"><span id="t_prod_' + a + '">${selected_prod[0].value}</span></div>\n                </td>\n                <td class="td-2">\n                    <span class="cl-mb">Вес:</span>\n                    <div class="inpt-dv">\n                        <input class="t_inp form-control" id="t_w_${t}" type=text value="${selected_prod[0].weight}"/>\n                    </div>\n                    <span class="t_val" id="t_val_${t}">${selected_prod[0].weight}</span>\n                    <span class="cl-mb">г</span>\n                </td>\n                <td class="td-3">\n                    <div>\n                        <span class="cl-mb">Белки</span>\n                    </div>\n                    <span id="t_prot_${t}">${selected_prod[0].protein}</span>\n                    <span class="cl-mb">г</span>\n                </td>\n                <td class="td-4">\n                    <div>\n                        <span class="cl-mb">Жиры</span>\n                    </div>\n                    <span id="t_fat_${t}">${selected_prod[0].fat}</span>\n                    <span class="cl-mb">г</span>\n                </td>\n                <td class="td-5">\n                    <div>\n                        <span class="cl-mb">Углеводы</span>\n                    </div>\n                    <span id="t_carb_${t}">${selected_prod[0].carb}</span>\n                    <span class="cl-mb">г</span>\n                </td>\n                <td class="td-6">\n                    <div>\n                        <span class="cl-mb">Калории</span>\n                    </div>\n                    <span id="t_cal_${t}">${selected_prod[0].cal}</span>\n                     <span class="cl-mb">ккал</span>\n                 </td>\n                <td class="td-7">\n                    <button class="btn btn-danger" data-delete="${t}" type="button">\n                        <svg class="bi bi-x" fill="currentColor" height="1em" viewBox="0 0 16 16" width="1em"\n                             xmlns="http://www.w3.org/2000/svg">\n                            <path clip-rule="evenodd"\n                                  d="M11.854 4.146a.5.5 0 010 .708l-7 7a.5.5 0 01-.708-.708l7-7a.5.5 0 01.708 0z"\n                                  fill-rule="evenodd"/>\n                            <path clip-rule="evenodd"\n                                  d="M4.146 4.146a.5.5 0 000 .708l7 7a.5.5 0 00.708-.708l-7-7a.5.5 0 00-.708 0z"\n                                  fill-rule="evenodd"/>\n                        </svg>\n                    </button>\n                </td>\n            </tr>\n        `),$("#tr"+t).fadeIn("slow"),$("#tbl_foot").show(),$(document).on("keyup","#t_w_"+t,(function(a){$("#t_val_"+t).text(a.target.value),prod_array[t].weight=a.target.value,calculates()})),calculates(),$("#autocomplete-ajax").val(""),selected_prod=[]})),$(document).on("click",".btn-danger",(function(t){delete_row(Number(t.target.dataset.delete))}))}))},function(t,a,n){}]);
//# sourceMappingURL=bundle.js.map